<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="VivaVoz.Views.RecordingsListView">
  <Grid RowDefinitions="Auto,*" RowSpacing="8">
    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="4">
      <TextBox Text="{Binding SearchText, Delay=300}"
               Watermark="Search recordings..." />
      <Button Grid.Column="1"
              Content="âœ•"
              Command="{Binding ClearSearchCommand}"
              IsVisible="{Binding HasSearchText}" />
    </Grid>

    <Panel Grid.Row="1">
      <ListBox ItemsSource="{Binding FilteredRecordings}"
               SelectedItem="{Binding SelectedRecording}">
        <ListBox.ItemTemplate>
          <DataTemplate>
            <Border Padding="10"
                    Margin="0,0,0,8"
                    BorderThickness="1"
                    BorderBrush="#1FFFFFFF"
                    CornerRadius="6">
              <StackPanel Spacing="6">
                <Grid ColumnDefinitions="*,Auto,Auto" ColumnSpacing="8">
                  <TextBlock Text="{Binding CreatedAt, StringFormat='{}{0:MMM dd, yyyy HH:mm}'}" />
                  <TextBlock Grid.Column="1"
                             Text="{Binding LanguageCode, Converter={StaticResource LanguageCodeToName}}"
                             Opacity="0.7" />
                  <TextBlock Grid.Column="2"
                             Text="{Binding Duration, StringFormat='{}{0:hh\\:mm\\:ss}'}"
                             Opacity="0.7" />
                </Grid>
                <TextBlock Text="{Binding Transcript, TargetNullValue='(No transcript yet)'}"
                           TextWrapping="Wrap"
                           MaxLines="2"
                           TextTrimming="CharacterEllipsis"
                           Opacity="0.8" />
              </StackPanel>
            </Border>
          </DataTemplate>
        </ListBox.ItemTemplate>
      </ListBox>
      <TextBlock Text="No recordings found"
                 IsVisible="{Binding NoRecordingsFound}"
                 HorizontalAlignment="Center"
                 VerticalAlignment="Center"
                 Opacity="0.5" />
    </Panel>
  </Grid>
</UserControl>
