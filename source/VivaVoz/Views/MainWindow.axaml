<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:VivaVoz.Views"
        x:Class="VivaVoz.Views.MainWindow"
        Width="1000"
        Height="650"
        Title="VivaVoz"
        Icon="avares://VivaVoz/Assets/vivavoz.ico">
  <DockPanel>
    <!-- Crash recovery notification bar -->
    <Border DockPanel.Dock="Top"
            IsVisible="{Binding HasOrphanedRecording}"
            Background="#CC4400"
            Padding="12,8">
      <Grid ColumnDefinitions="*,Auto,Auto" ColumnSpacing="8">
        <TextBlock Grid.Column="0"
                   Text="An unfinished recording was found. Recover it?"
                   VerticalAlignment="Center" />
        <Button Grid.Column="1"
                Content="Recover"
                Command="{Binding RecoverOrphanCommand}"
                Padding="10,4" />
        <Button Grid.Column="2"
                Content="Dismiss"
                Command="{Binding DismissOrphanCommand}"
                Padding="10,4" />
      </Grid>
    </Border>

    <!-- Top bar â€” spans full width -->
    <Border DockPanel.Dock="Top" Padding="16,12,16,8">
      <Grid ColumnDefinitions="Auto,Auto,Auto,*,Auto,Auto" ColumnSpacing="8">
        <TextBlock Text="Recordings" FontSize="20" FontWeight="SemiBold" VerticalAlignment="Center" />
        <Button Grid.Column="1"
                Content="Record"
                Command="{Binding StartRecordingCommand}"
                IsVisible="{Binding IsNotRecording}" />
        <Button Grid.Column="2"
                Content="Stop"
                Command="{Binding StopRecordingCommand}"
                IsVisible="{Binding IsRecording}" />
        <Button Grid.Column="4"
                Content="Settings"
                Command="{Binding OpenSettingsCommand}" />
        <Button Grid.Column="5"
                Content="About"
                Command="{Binding OpenAboutCommand}" />
      </Grid>
    </Border>

    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="300" MinWidth="300" />
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <Border Grid.Column="0" Padding="16,0,16,16" BorderThickness="0,0,1,0" BorderBrush="#1FFFFFFF">
        <views:RecordingsListView />
      </Border>

      <GridSplitter Grid.Column="1"
                    Width="6"
                    ResizeDirection="Columns"
                    ResizeBehavior="PreviousAndNext"
                    Background="Transparent" />

      <Border Grid.Column="2" Padding="16">
        <views:RecordingDetailView />
      </Border>
    </Grid>
  </DockPanel>
</Window>
